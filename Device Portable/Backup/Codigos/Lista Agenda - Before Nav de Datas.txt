procedure TfrmAgendaView.FillListBoxAgenda;
var
  Data: string;
begin
  try
    lstboxAgenda.BeginUpdate;
    lstboxAgenda.Items.Clear;
    DataSetAgenda.Refresh;
    DataSetAgenda.DisableControls;
    DataSetAgenda.First;

    while not DataSetAgenda.Eof do
    begin
      if not (DataSetAgenda.Bof) then
        SetListBoxAgendaGroupHeader;

      Data := DataSetAgenda.FieldByName('data').AsString;
      //SetListBoxAgendaItemData(Data);

      while (Data = (DataSetAgenda.FieldByName('data').AsString)) and
        not(DataSetAgenda.Eof) do
      begin
        //Teste
        SetListBoxAgendaGroupHeader;

        SetListBoxAgendaItem(DataSetAgenda.FieldByName('descricao').AsString);
        DataSetAgenda.Next;
      end;
    end;
  finally
    lstboxAgenda.EndUpdate;
    DataSetAgenda.EnableControls;
  end;
end;